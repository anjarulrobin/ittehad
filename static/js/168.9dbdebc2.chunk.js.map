{"version":3,"file":"static/js/168.9dbdebc2.chunk.js","mappings":"iNAGO,SAAeA,EAAe,GAAD,+BAiBnC,8CAjBM,WAA8BC,GAAiB,kFAIH,OAHzCC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,SAAW,IACtDC,EAAgB,OAARL,QAAQ,IAARA,OAAQ,EAARA,EAAUK,MAElBC,EAAG,UAAMC,+CAAgC,sCAEIC,EAAAA,EAAAA,GAAQF,EACvD,CACIG,OAAQ,OACRV,KAAME,KAAKS,UAAUX,GACrBY,QAAS,CACL,eAAgB,mBAChB,cAAgB,UAAD,OAAYN,MAEjC,OARoC,OAApCO,EAAoC,yBAUnCA,GAAe,4CACzB,sB,uBCfc,SAASC,IACpB,OAA8BC,EAAAA,EAAAA,UAAiB,IAAG,eAA3CC,EAAO,KAAEC,EAAU,KACpBC,GAAWC,EAAAA,EAAAA,MACjB,GAAkCJ,EAAAA,EAAAA,UAA+C,CAAEK,MAAM,EAAOC,QAAS,KAAK,eAAvGC,EAAS,KAAEC,EAAY,KAC9B,GAA8BR,EAAAA,EAAAA,WAAS,GAAM,eAAtCS,EAAO,KAAEC,EAAU,KAEpBC,EAAY,yCAAG,WAAOC,GAA8B,sEACtDA,EAAGC,iBACHH,GAAW,GACX1B,EAAe,CAAE8B,KAAMb,IAClBc,MAAK,SAACC,GACe,MAAdA,EAAKC,KACLd,EAAS,cAAe,CAAEe,SAAS,IAGnCV,EAAa,CAAEH,MAAM,EAAMC,QAAS,CAACU,EAAKG,OAASH,EAAKf,SAAW,4BAE3E,IACCmB,OAAM,SAACC,GAAG,OAAKC,QAAQH,MAAME,EAAI,IACjCE,SAAQ,kBAAMb,GAAW,EAAM,IAAC,2CACxC,gBAdiB,sCAgBlB,OACI,iBAAKc,UAAU,MAAK,WAChB,cAAGA,UAAU,qCAAoC,4BACjD,gBAAKA,UAAU,sBAAqB,UAChC,kBAAMA,UAAU,GAAGC,OAAO,IAAIC,SAAUf,EAAa,WACjD,gBAAKa,UAAU,MAAK,UAChB,qBACIG,KAAK,UACLC,SAAU,SAAChB,GAAE,OAAKV,EAAWU,EAAGiB,OAAOC,MAAM,EAC7CN,UAAU,8CACVO,YAAY,uFACZC,UAAU,MAGdzB,EAAUF,OACN,iBACImB,UAAU,mCAAkC,cAAGjB,EAAUD,YAIxD,IAAZG,GAAmB,SAACwB,EAAA,EAAM,KACtB,gBAAKT,UAAU,mCAAkC,UAC9C,mBAAQU,KAAK,SAASV,UAAU,2BAA0B,2BAUtF,C,oEC3DO,SAASS,IACZ,OACI,gBAAKT,UAAU,sBAAqB,kKAI5C,C","sources":["apis/sendMessage.ts","components/CreateMessage.tsx","components/Loader.tsx"],"sourcesContent":["import { MessageBody, MessageSendResponse } from \"../types/message\";\nimport { fetcher } from \"../utils/fetcher\";\n\nexport async function sendMessageApi(body: MessageBody) {\n    const authData = JSON.parse(localStorage.getItem('auth') || '');\n    const token = authData?.token;\n    // const url = `https://wild-tan-meerkat-robe.cyclic.app/api/groups/send-message`;\n    const url = `${process.env.REACT_APP_API_ORIGIN}/api/groups/send-message`;\n\n    const mssagesResponse: MessageSendResponse = await fetcher(url,\n        {\n            method: 'POST',\n            body: JSON.stringify(body),\n            headers: {\n                'Content-type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            }\n        })\n\n    return mssagesResponse;\n}","import { FormEvent, useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\";\nimport { sendMessageApi } from \"../apis/sendMessage\";\nimport { Loader } from \"./Loader\";\n\nexport default function CreateMessage() {\n    const [message, setMessage] = useState<string>('');\n    const navigate = useNavigate();\n    const [authError, setAuthError] = useState<{ flag: boolean, details: string[] }>({ flag: false, details: [] });\n    const [loading, setLoading] = useState(false);\n\n    const handleSubmit = async (ev: FormEvent<HTMLFormElement>) => {\n        ev.preventDefault();\n        setLoading(true);\n        sendMessageApi({ text: message })\n            .then((data) => {\n                if (data.code === 200) {\n                    navigate('/discussion', { replace: true });\n                }\n                else {\n                    setAuthError({ flag: true, details: [data.error || data.message || 'Failed to send message!'] });\n                }\n            })\n            .catch((err) => console.error(err))\n            .finally(() => setLoading(false))\n    }\n\n    return (\n        <div className=\"m-2\">\n            <p className=\"mb-2 text-lg text-center font-bold\"> My thoughts </p>\n            <div className=\"flex justify-center\">\n                <form className=\"\" action=\"#\" onSubmit={handleSubmit}>\n                    <div className=\"m-2\">\n                        <textarea\n                            name=\"message\"\n                            onChange={(ev) => setMessage(ev.target.value)}\n                            className=\"border border-[#20BB96] p-1 rounded-lg h-52\"\n                            placeholder=\"লিখব যা বলতে চাই...\"\n                            required={true} />\n                    </div>\n                    {\n                        authError.flag && (\n                            <div\n                                className=\"text-red-400 text-xs text-center\"> {authError.details}\n                            </div>\n                        )\n                    }\n                    {loading === true ? <Loader /> :\n                        (<div className=\"m-2 mt-4 bg-[#20BB96] rounded-lg\"                    >\n                            <button type=\"submit\" className=\"p-1.5 text-center w-full\"                        >\n                                Send\n                            </button>\n                        </div>)\n                    }\n                </form>\n            </div>\n        </div>\n\n    )\n}","export function Loader() {\n    return (\n        <div className=\"text-center text-sm\">\n            অনুগ্রহপূর্বক অপেক্ষা করুন...\n        </div>\n    )\n}"],"names":["sendMessageApi","body","authData","JSON","parse","localStorage","getItem","token","url","process","fetcher","method","stringify","headers","mssagesResponse","CreateMessage","useState","message","setMessage","navigate","useNavigate","flag","details","authError","setAuthError","loading","setLoading","handleSubmit","ev","preventDefault","text","then","data","code","replace","error","catch","err","console","finally","className","action","onSubmit","name","onChange","target","value","placeholder","required","Loader","type"],"sourceRoot":""}