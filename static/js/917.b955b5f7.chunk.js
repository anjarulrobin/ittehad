"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[917],{917:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var r=n(2982),s=n(885),a=n(2791),c=n(7689),o=n(4165),i=n(5861),l=n(8385);function u(){return(u=(0,i.Z)((0,o.Z)().mark((function t(e){var n,r,s,a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("auth")||""),r=null===n||void 0===n?void 0:n.token,s="".concat("https://wild-tan-meerkat-robe.cyclic.app/api","/groups/posts/").concat(e.postId,"/comments"),t.next=5,(0,l._)(s,{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({text:e.text})});case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=(0,i.Z)((0,o.Z)().mark((function t(e){var n,r,s,a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("auth")||""),r=null===n||void 0===n?void 0:n.token,s="".concat("https://wild-tan-meerkat-robe.cyclic.app/api","/groups/posts/").concat(e.postId,"/comments?skip=").concat(e.skip,"&limit=").concat(e.limit),t.next=5,(0,l._)(s,{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r)}});case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=n(1605),f=n(8936),m=n(184);function h(){var t=(0,a.useState)(""),e=(0,s.Z)(t,2),n=e[0],o=e[1],i=(0,a.useState)([]),l=(0,s.Z)(i,2),h=l[0],x=l[1],v=(0,a.useState)(0),j=(0,s.Z)(v,2),g=j[0],w=j[1],C=((0,c.s0)(),(0,a.useState)({flag:!1,details:[]})),b=(0,s.Z)(C,2),N=b[0],y=(b[1],(0,a.useState)("")),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],B=(0,c.UO)().postId,I=(0,a.useRef)(null);console.log(B);return(0,a.useEffect)((function(){S("loadComments"),function(t){return d.apply(this,arguments)}({limit:10,skip:g,postId:B||""}).then((function(t){if(200===t.code){for(var e=0;e<t.data.length;e++)t.data[e].id=t.data[e]._id;t.data.reverse(),x(t.data)}else x([])})).catch((function(t){return console.error(t)})).finally((function(){return S("")}))}),[g]),(0,m.jsxs)("div",{className:"m-2",children:[(0,m.jsxs)("div",{className:"max-h-96 overflow-scroll",children:["loadComments"===k?(0,m.jsx)(p.a,{}):(0,m.jsx)("div",{className:"m-1 mt-4 text-center h-fit bg-[#20BB96] rounded-lg",children:(0,m.jsx)("button",{type:"button",className:"p-1.5 ",onClick:function(){return w(g+10)},children:"Show More"})}),null===h||void 0===h?void 0:h.map((function(t,e){return(0,m.jsx)("div",{className:"border rounded-lg m-2 p-2",ref:function(t){var n;e===h.length-1&&(I.current=t,null===(n=I.current)||void 0===n||n.scrollIntoView({behavior:"smooth"}))},children:(0,m.jsxs)("div",{className:"flex flex-row",children:[(0,m.jsxs)("div",{className:"basis-1/4",children:[(0,m.jsxs)("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,m.jsx)("circle",{cx:"18",cy:"18",r:"18",fill:"#EEFAFD"}),(0,m.jsx)("path",{d:"M18 8C15.38 8 13.25 10.13 13.25 12.75C13.25 15.32 15.26 17.4 17.88 17.49C17.96 17.48 18.04 17.48 18.1 17.49C18.12 17.49 18.13 17.49 18.15 17.49C18.16 17.49 18.16 17.49 18.17 17.49C20.73 17.4 22.74 15.32 22.75 12.75C22.75 10.13 20.62 8 18 8Z",fill:"#6299A9"}),(0,m.jsx)("path",{d:"M23.08 20.1499C20.29 18.2899 15.74 18.2899 12.93 20.1499C11.66 20.9999 10.96 22.1499 10.96 23.3799C10.96 24.6099 11.66 25.7499 12.92 26.5899C14.32 27.5299 16.16 27.9999 18 27.9999C19.84 27.9999 21.68 27.5299 23.08 26.5899C24.34 25.7399 25.04 24.5999 25.04 23.3599C25.03 22.1299 24.34 20.9899 23.08 20.1499Z",fill:"#6299A9"})]}),(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsxs)("p",{className:"bg-[#E1FFF8] text-[#20BB96] text-[10px] mx-0.5 px-0.5 h-fit",children:[" ","teacher"===t.sender.userType?"\u09ab\u09c1\u099c\u09be\u09b2\u09be":"\u0986\u09ac\u09a8\u09be"]}),(0,m.jsxs)("p",{className:"bg-[#E1FFF8] text-[#20BB96] text-[10px] mx-0.5 px-0.5 h-fit",children:[" ",t.sender.passingYear]})]}),(0,m.jsxs)("p",{className:"text-xs mt-1",children:[" ",t.sender.name]}),(0,m.jsxs)("p",{className:"text-[10px] mt-1",children:[" ",(0,f.D)(new Date(t.createdAt))]})]}),(0,m.jsx)("p",{className:"basis-3/4  p-1",children:t.text})]})},t.id)}))]}),(0,m.jsxs)("form",{className:"m-2 w-full flex justify-center",action:"#",onSubmit:function(t){t.preventDefault(),S("sendComment"),function(t){return u.apply(this,arguments)}({postId:B||"",text:n}).then((function(t){200===t.code&&(x([].concat((0,r.Z)(h),[t.data])),o("")),S("")})).catch((function(t){return console.error(t)})).finally((function(){return S("")}))},children:[(0,m.jsx)("div",{className:"m-1",children:(0,m.jsx)("textarea",{name:"comment",value:n,onChange:function(t){return o(t.target.value)},className:"border border-[#20BB96] p-1 rounded-lg w-full",placeholder:"\u09b2\u09bf\u0996\u09ac \u09af\u09be \u09ac\u09b2\u09a4\u09c7 \u099a\u09be\u0987...",required:!0})}),N.flag&&(0,m.jsxs)("div",{className:"text-red-400 text-xs text-center",children:[" ",N.details]}),"sendComment"===k?(0,m.jsx)(p.a,{}):(0,m.jsx)("div",{className:"m-1 mt-4 h-fit bg-[#20BB96] rounded-lg",children:(0,m.jsx)("button",{type:"submit",className:"p-1.5",children:"Send"})})]})]})}},1605:function(t,e,n){n.d(e,{a:function(){return s}});var r=n(184);function s(){return(0,r.jsx)("div",{className:"text-center text-sm",children:"\u0985\u09a8\u09c1\u0997\u09cd\u09b0\u09b9\u09aa\u09c2\u09b0\u09cd\u09ac\u0995 \u0985\u09aa\u09c7\u0995\u09cd\u09b7\u09be \u0995\u09b0\u09c1\u09a8..."})}},8936:function(t,e,n){n.d(e,{D:function(){return a}});var r=n(885),s=["\u099c\u09be\u09a8\u09c1\u09af\u09bc\u09be\u09b0\u09c0","\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1\u09af\u09bc\u09be\u09b0\u09c0","\u09ae\u09be\u09b0\u09cd\u099a","\u098f\u09aa\u09cd\u09b0\u09bf\u09b2","\u09ae\u09c7","\u099c\u09c1\u09a8","\u099c\u09c1\u09b2\u09be\u0987","\u0986\u0997\u09b8\u09cd\u099f","\u09b8\u09c7\u09aa\u09cd\u099f\u09c7\u09ae\u09cd\u09ac\u09b0","\u0985\u0995\u09cd\u099f\u09cb\u09ac\u09b0","\u09a8\u09ad\u09c7\u09ae\u09cd\u09ac\u09b0","\u09a1\u09bf\u09b8\u09c7\u09ae\u09cd\u09ac\u09b0"];function a(t){var e=(t=new Date(t)).getMonth(),n=t.toISOString().split("-"),a=(0,r.Z)(n,3),c=a[0],o=(a[1],a[2].split("T")),i=(0,r.Z)(o,1)[0];return"".concat(i," ").concat(s[e],", ").concat(c)}},8385:function(t,e,n){n.d(e,{_:function(){return a}});var r=n(4165),s=n(5861);function a(t,e){return c.apply(this,arguments)}function c(){return(c=(0,s.Z)((0,r.Z)().mark((function t(e,n){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,n);case 3:return s=t.sent,t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(0),console.error("Error network call",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}}}]);
//# sourceMappingURL=917.b955b5f7.chunk.js.map